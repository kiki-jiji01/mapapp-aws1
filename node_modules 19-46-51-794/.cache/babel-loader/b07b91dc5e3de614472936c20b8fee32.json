{"ast":null,"code":"var _jsxFileName = \"/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryDelete.js\",\n    _s = $RefreshSig$();\n\nimport { useState } from 'react';\nimport { useParams } from \"react-router\";\nimport axios from \"axios\";\nimport { API } from '../api';\nimport Container from '@mui/material/Container';\nimport { useFormik } from 'formik';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CountryDelete() {\n  _s();\n\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [loadingCountry, setLoadingCountry] = useState(false);\n  const [country, setCountry] = useState(null);\n  const {\n    id\n  } = useParams();\n  const {\n    user: {\n      token\n    }\n  } = useContext(AuthContext);\n  useEffect(() => {\n    if (country && !country.is_owner) {\n      history.push(`/`);\n    }\n\n    return () => null;\n  });\n  useEffect(() => {\n    setLoadingCountry(true);\n\n    function fetchCountry() {\n      axios.get(API.countries.retrieve(id), {\n        headers: {\n          \"Authorization\": `Token ${token}`\n        }\n      }).then(res => {\n        setCountry(res.data);\n      }).finally(() => {\n        setLoadingCountry(false);\n      });\n    }\n\n    fetchCountry();\n    return () => null;\n  }, [id, token]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    axios.delete(API.countries.delete(id), {\n      headers: {\n        \"Authorization\": `Token ${token}`\n      }\n    }).then(res => {\n      history.push(`/countries`);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    sx: {\n      marginTop: \"20vh\"\n    },\n    children: [loading && \"Submitting...\", loadingCountry && \"Fetching Country Details...\", country && /*#__PURE__*/_jsxDEV(Button, {\n      variant: \"contained\",\n      fullWidth: true,\n      type: \"submit\",\n      onClick: handleSubmit,\n      children: \"Submit\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CountryDelete, \"fuTlHC//7A7ivJG0RAnLBjlutnM=\", true, function () {\n  return [useParams];\n});\n\n_c = CountryDelete;\nexport default CountryDelete;\n\nvar _c;\n\n$RefreshReg$(_c, \"CountryDelete\");","map":{"version":3,"sources":["/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryDelete.js"],"names":["useState","useParams","axios","API","Container","useFormik","Button","TextField","CountryDelete","history","useHistory","loading","setLoading","loadingCountry","setLoadingCountry","country","setCountry","id","user","token","useContext","AuthContext","useEffect","is_owner","push","fetchCountry","get","countries","retrieve","headers","then","res","data","finally","handleSubmit","e","preventDefault","delete","marginTop"],"mappings":"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","sourcesContent":["import { useState } from 'react';\nimport { useParams } from \"react-router\"\nimport axios from \"axios\"\nimport { API } from '../api'\nimport Container from '@mui/material/Container';\nimport { useFormik } from 'formik';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nexport function CountryDelete() {\n    const history = useHistory();\n    const [loading, setLoading] = useState(false)\n    const [loadingCountry, setLoadingCountry] = useState(false)\n\n    const [country, setCountry] = useState(null)\n    const { id } = useParams()\n\n    const { user: { token } } = useContext(AuthContext)\n\n    useEffect(() => {\n        if (country && !country.is_owner) {\n            history.push(`/`)\n        }\n        return () => null\n    })\n    \n    useEffect(() => {\n        setLoadingCountry(true)\n        function fetchCountry() {\n            axios.get(API.countries.retrieve(id),{\n                headers: {\n                    \"Authorization\": `Token ${token}`\n                }\n            })\n                .then(res => {\n                    setCountry(res.data)\n                })\n                .finally(() => {\n                    setLoadingCountry(false)\n                })\n        }\n        fetchCountry()\n        return () => null\n    }, [id,token])\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        setLoading(true)\n        axios.delete(API.countries.delete(id), {\n            headers: {\n                \"Authorization\": `Token ${token}`\n            }\n        })\n            .then(res => {\n                history.push(`/countries`)\n            })\n            .finally(() => {\n                setLoading(false)\n            })\n    }\n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\" sx={{ marginTop: \"20vh\"}}>\n            {loading && \"Submitting...\"}\n            {loadingCountry && \"Fetching Country Details...\"}\n            {country && (\n            <Button  variant=\"contained\" fullWidth type=\"submit\" onClick = {handleSubmit}>\n                Submit\n            </Button>\n            )}\n        </Container>\n    )\n\n}\n\nexport default CountryDelete"]},"metadata":{},"sourceType":"module"}