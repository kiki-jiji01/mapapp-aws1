{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = usePlacesWidget;\n\nvar _react = require(\"react\");\n\nvar _utils = require(\"./utils\");\n\nvar _constants = require(\"./constants\");\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction usePlacesWidget(props) {\n  var ref = props.ref,\n      onPlaceSelected = props.onPlaceSelected,\n      apiKey = props.apiKey,\n      _props$inputAutocompl = props.inputAutocompleteValue,\n      inputAutocompleteValue = _props$inputAutocompl === void 0 ? \"new-password\" : _props$inputAutocompl,\n      _props$options = props.options;\n  _props$options = _props$options === void 0 ? {} : _props$options;\n\n  var _props$options$types = _props$options.types,\n      types = _props$options$types === void 0 ? [\"(cities)\"] : _props$options$types,\n      componentRestrictions = _props$options.componentRestrictions,\n      _props$options$fields = _props$options.fields,\n      fields = _props$options$fields === void 0 ? [\"address_components\", \"geometry.location\", \"place_id\", \"formatted_address\"] : _props$options$fields,\n      bounds = _props$options.bounds,\n      options = _objectWithoutProperties(_props$options, [\"types\", \"componentRestrictions\", \"fields\", \"bounds\"]),\n      _props$googleMapsScri = props.googleMapsScriptBaseUrl,\n      googleMapsScriptBaseUrl = _props$googleMapsScri === void 0 ? _constants.GOOGLE_MAP_SCRIPT_BASE_URL : _props$googleMapsScri,\n      language = props.language;\n\n  var inputRef = (0, _react.useRef)(null);\n  var event = (0, _react.useRef)(null);\n  var autocompleteRef = (0, _react.useRef)(null);\n  var observerHack = (0, _react.useRef)(null);\n  var languageQueryParam = language ? \"&language=\".concat(language) : \"\";\n  var googleMapsScriptUrl = \"\".concat(googleMapsScriptBaseUrl, \"?libraries=places&key=\").concat(apiKey).concat(languageQueryParam);\n  var handleLoadScript = (0, _react.useCallback)(function () {\n    return (0, _utils.loadGoogleMapScript)(googleMapsScriptBaseUrl, googleMapsScriptUrl);\n  }, [googleMapsScriptBaseUrl, googleMapsScriptUrl]);\n  (0, _react.useEffect)(function () {\n    var config = _objectSpread(_objectSpread({}, options), {}, {\n      fields: fields,\n      types: types,\n      bounds: bounds\n    });\n\n    if (componentRestrictions) {\n      config.componentRestrictions = componentRestrictions;\n    }\n\n    if (autocompleteRef.current || !inputRef.current || !_utils.isBrowser) return;\n    if (ref && !ref.current) ref.current = inputRef.current;\n\n    var handleAutoComplete = function handleAutoComplete() {\n      if (typeof google === \"undefined\") return console.error(\"Google has not been found. Make sure your provide apiKey prop.\");\n      if (!google.maps.places) return console.error(\"Google maps places API must be loaded.\");\n      if (!inputRef.current instanceof HTMLInputElement) return console.error(\"Input ref must be HTMLInputElement.\");\n      autocompleteRef.current = new google.maps.places.Autocomplete(inputRef.current, config);\n      event.current = autocompleteRef.current.addListener(\"place_changed\", function () {\n        if (onPlaceSelected && autocompleteRef && autocompleteRef.current) {\n          onPlaceSelected(autocompleteRef.current.getPlace(), inputRef.current, autocompleteRef.current);\n        }\n      });\n    };\n\n    if (apiKey) {\n      handleLoadScript().then(function () {\n        return handleAutoComplete();\n      });\n    } else {\n      handleAutoComplete();\n    }\n\n    return function () {\n      return event.current ? event.current.remove() : undefined;\n    };\n  }, []); // Autofill workaround adapted from https://stackoverflow.com/questions/29931712/chrome-autofill-covers-autocomplete-for-google-maps-api-v3/49161445#49161445\n\n  (0, _react.useEffect)(function () {\n    if (_utils.isBrowser && window.MutationObserver && inputRef.current && inputRef.current instanceof HTMLInputElement) {\n      observerHack.current = new MutationObserver(function () {\n        observerHack.current.disconnect();\n        inputRef.current.autocomplete = inputAutocompleteValue;\n      });\n      observerHack.current.observe(inputRef.current, {\n        attributes: true,\n        attributeFilter: [\"autocomplete\"]\n      });\n    }\n  }, [inputAutocompleteValue]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setFields(fields);\n    }\n  }, [fields]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setBounds(bounds);\n    }\n  }, [bounds]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setComponentRestrictions(componentRestrictions);\n    }\n  }, [componentRestrictions]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setOptions(options);\n    }\n  }, [options]);\n  return {\n    ref: inputRef,\n    autocompleteRef: autocompleteRef\n  };\n}","map":{"version":3,"sources":["/Users/genta/mapapp-aws1/mapapp-aws1/node_modules/react-google-autocomplete/lib/usePlacesWidget.js"],"names":["Object","defineProperty","exports","value","default","usePlacesWidget","_react","require","_utils","_constants","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","obj","configurable","writable","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceSymbolKeys","indexOf","prototype","propertyIsEnumerable","call","sourceKeys","props","ref","onPlaceSelected","apiKey","_props$inputAutocompl","inputAutocompleteValue","_props$options","options","_props$options$types","types","componentRestrictions","_props$options$fields","fields","bounds","_props$googleMapsScri","googleMapsScriptBaseUrl","GOOGLE_MAP_SCRIPT_BASE_URL","language","inputRef","useRef","event","autocompleteRef","observerHack","languageQueryParam","concat","googleMapsScriptUrl","handleLoadScript","useCallback","loadGoogleMapScript","useEffect","config","current","isBrowser","handleAutoComplete","google","console","error","maps","places","HTMLInputElement","Autocomplete","addListener","getPlace","then","remove","undefined","window","MutationObserver","disconnect","autocomplete","observe","attributes","attributeFilter","setFields","setBounds","setComponentRestrictions","setOptions"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = usePlacesWidget;\n\nvar _react = require(\"react\");\n\nvar _utils = require(\"./utils\");\n\nvar _constants = require(\"./constants\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nfunction usePlacesWidget(props) {\n  var ref = props.ref,\n      onPlaceSelected = props.onPlaceSelected,\n      apiKey = props.apiKey,\n      _props$inputAutocompl = props.inputAutocompleteValue,\n      inputAutocompleteValue = _props$inputAutocompl === void 0 ? \"new-password\" : _props$inputAutocompl,\n      _props$options = props.options;\n  _props$options = _props$options === void 0 ? {} : _props$options;\n\n  var _props$options$types = _props$options.types,\n      types = _props$options$types === void 0 ? [\"(cities)\"] : _props$options$types,\n      componentRestrictions = _props$options.componentRestrictions,\n      _props$options$fields = _props$options.fields,\n      fields = _props$options$fields === void 0 ? [\"address_components\", \"geometry.location\", \"place_id\", \"formatted_address\"] : _props$options$fields,\n      bounds = _props$options.bounds,\n      options = _objectWithoutProperties(_props$options, [\"types\", \"componentRestrictions\", \"fields\", \"bounds\"]),\n      _props$googleMapsScri = props.googleMapsScriptBaseUrl,\n      googleMapsScriptBaseUrl = _props$googleMapsScri === void 0 ? _constants.GOOGLE_MAP_SCRIPT_BASE_URL : _props$googleMapsScri,\n      language = props.language;\n\n  var inputRef = (0, _react.useRef)(null);\n  var event = (0, _react.useRef)(null);\n  var autocompleteRef = (0, _react.useRef)(null);\n  var observerHack = (0, _react.useRef)(null);\n  var languageQueryParam = language ? \"&language=\".concat(language) : \"\";\n  var googleMapsScriptUrl = \"\".concat(googleMapsScriptBaseUrl, \"?libraries=places&key=\").concat(apiKey).concat(languageQueryParam);\n  var handleLoadScript = (0, _react.useCallback)(function () {\n    return (0, _utils.loadGoogleMapScript)(googleMapsScriptBaseUrl, googleMapsScriptUrl);\n  }, [googleMapsScriptBaseUrl, googleMapsScriptUrl]);\n  (0, _react.useEffect)(function () {\n    var config = _objectSpread(_objectSpread({}, options), {}, {\n      fields: fields,\n      types: types,\n      bounds: bounds\n    });\n\n    if (componentRestrictions) {\n      config.componentRestrictions = componentRestrictions;\n    }\n\n    if (autocompleteRef.current || !inputRef.current || !_utils.isBrowser) return;\n    if (ref && !ref.current) ref.current = inputRef.current;\n\n    var handleAutoComplete = function handleAutoComplete() {\n      if (typeof google === \"undefined\") return console.error(\"Google has not been found. Make sure your provide apiKey prop.\");\n      if (!google.maps.places) return console.error(\"Google maps places API must be loaded.\");\n      if (!inputRef.current instanceof HTMLInputElement) return console.error(\"Input ref must be HTMLInputElement.\");\n      autocompleteRef.current = new google.maps.places.Autocomplete(inputRef.current, config);\n      event.current = autocompleteRef.current.addListener(\"place_changed\", function () {\n        if (onPlaceSelected && autocompleteRef && autocompleteRef.current) {\n          onPlaceSelected(autocompleteRef.current.getPlace(), inputRef.current, autocompleteRef.current);\n        }\n      });\n    };\n\n    if (apiKey) {\n      handleLoadScript().then(function () {\n        return handleAutoComplete();\n      });\n    } else {\n      handleAutoComplete();\n    }\n\n    return function () {\n      return event.current ? event.current.remove() : undefined;\n    };\n  }, []); // Autofill workaround adapted from https://stackoverflow.com/questions/29931712/chrome-autofill-covers-autocomplete-for-google-maps-api-v3/49161445#49161445\n\n  (0, _react.useEffect)(function () {\n    if (_utils.isBrowser && window.MutationObserver && inputRef.current && inputRef.current instanceof HTMLInputElement) {\n      observerHack.current = new MutationObserver(function () {\n        observerHack.current.disconnect();\n        inputRef.current.autocomplete = inputAutocompleteValue;\n      });\n      observerHack.current.observe(inputRef.current, {\n        attributes: true,\n        attributeFilter: [\"autocomplete\"]\n      });\n    }\n  }, [inputAutocompleteValue]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setFields(fields);\n    }\n  }, [fields]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setBounds(bounds);\n    }\n  }, [bounds]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setComponentRestrictions(componentRestrictions);\n    }\n  }, [componentRestrictions]);\n  (0, _react.useEffect)(function () {\n    if (autocompleteRef.current) {\n      autocompleteRef.current.setOptions(options);\n    }\n  }, [options]);\n  return {\n    ref: inputRef,\n    autocompleteRef: autocompleteRef\n  };\n}"]},"metadata":{},"sourceType":"script"}