{"ast":null,"code":"var _jsxFileName = \"/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryDelete.js\",\n    _s = $RefreshSig$();\n\nimport { useContext, useEffect, useState } from 'react';\nimport { useHistory, NavLink } from 'react-router-dom';\nimport axios from \"axios\";\nimport { API } from '../api';\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { useParams } from 'react-router';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function CountryDelete() {\n  _s();\n\n  const history = useHistory();\n  const [loading, setLoading] = useState(false);\n  const [loadingCountry, setLoadingCountry] = useState(false);\n  const [country, setCountry] = useState(null);\n  const {\n    id\n  } = useParams();\n  const {\n    user: {\n      token\n    }\n  } = useContext(AuthContext);\n  useEffect(() => {\n    setLoadingCountry(true);\n\n    function fetchCountry() {\n      axios.get(API.countries.retrieve(id)).then(res => {\n        setCountry(res.data);\n      }).finally(() => {\n        setLoadingCountry(false);\n      });\n    }\n\n    fetchCountry();\n    return () => null;\n  }, [id]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    setLoading(true);\n    axios.delete(API.countries.delete(id), {\n      headers: {\n        \"Authorization\": `Token ${token}`\n      }\n    }).then(res => {\n      history.push(`/`);\n    }).finally(() => {\n      setLoading(false);\n    });\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [loading && \"Submitting...\", loadingJob && \"Fetching Country Details...\", country && /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 50,\n    columnNumber: 9\n  }, this);\n}\n\n_s(CountryDelete, \"SKIfjFCAI6rqUYk5nj9f3FiOyyg=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = CountryDelete;\nexport default CountryDelete;\n\nvar _c;\n\n$RefreshReg$(_c, \"CountryDelete\");","map":{"version":3,"sources":["/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryDelete.js"],"names":["useContext","useEffect","useState","useHistory","NavLink","axios","API","AuthContext","useParams","CountryDelete","history","loading","setLoading","loadingCountry","setLoadingCountry","country","setCountry","id","user","token","fetchCountry","get","countries","retrieve","then","res","data","finally","handleSubmit","e","preventDefault","delete","headers","push","loadingJob"],"mappings":";;;AAAA,SAASA,UAAT,EAAqBC,SAArB,EAAgCC,QAAhC,QAAgD,OAAhD;AACA,SAAQC,UAAR,EAAoBC,OAApB,QAAkC,kBAAlC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,SAASC,WAAT,QAA4B,yBAA5B;AACA,SAASC,SAAT,QAA0B,cAA1B;;AAEA,OAAO,SAASC,aAAT,GAAyB;AAAA;;AAC5B,QAAMC,OAAO,GAAGP,UAAU,EAA1B;AACA,QAAM,CAACQ,OAAD,EAAUC,UAAV,IAAwBV,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACW,cAAD,EAAiBC,iBAAjB,IAAsCZ,QAAQ,CAAC,KAAD,CAApD;AAEA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBd,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM;AAAEe,IAAAA;AAAF,MAAST,SAAS,EAAxB;AAEA,QAAM;AAAEU,IAAAA,IAAI,EAAE;AAAEC,MAAAA;AAAF;AAAR,MAAsBnB,UAAU,CAACO,WAAD,CAAtC;AAEAN,EAAAA,SAAS,CAAC,MAAM;AACZa,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;;AACA,aAASM,YAAT,GAAwB;AACpBf,MAAAA,KAAK,CAACgB,GAAN,CAAUf,GAAG,CAACgB,SAAJ,CAAcC,QAAd,CAAuBN,EAAvB,CAAV,EACKO,IADL,CACUC,GAAG,IAAI;AACTT,QAAAA,UAAU,CAACS,GAAG,CAACC,IAAL,CAAV;AACH,OAHL,EAIKC,OAJL,CAIa,MAAM;AACXb,QAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH,OANL;AAOH;;AACDM,IAAAA,YAAY;AACZ,WAAO,MAAM,IAAb;AACH,GAbQ,EAaN,CAACH,EAAD,CAbM,CAAT;;AAeA,WAASW,YAAT,CAAsBC,CAAtB,EAAyB;AACrBA,IAAAA,CAAC,CAACC,cAAF;AACAlB,IAAAA,UAAU,CAAC,IAAD,CAAV;AACAP,IAAAA,KAAK,CAAC0B,MAAN,CAAazB,GAAG,CAACgB,SAAJ,CAAcS,MAAd,CAAqBd,EAArB,CAAb,EAAuC;AACnCe,MAAAA,OAAO,EAAE;AACL,yBAAkB,SAAQb,KAAM;AAD3B;AAD0B,KAAvC,EAKKK,IALL,CAKUC,GAAG,IAAI;AACTf,MAAAA,OAAO,CAACuB,IAAR,CAAc,GAAd;AACH,KAPL,EAQKN,OARL,CAQa,MAAM;AACXf,MAAAA,UAAU,CAAC,KAAD,CAAV;AACH,KAVL;AAWH;;AAED,sBACI;AAAA,eACKD,OAAO,IAAI,eADhB,EAEKuB,UAAU,IAAI,6BAFnB,EAGKnB,OAAO,iBACJ;AAAM,MAAA,QAAQ,EAAEa,YAAhB;AAAA,6BACI;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAJR;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH;;GArDenB,a;UACIN,U,EAKDK,S;;;KANHC,a;AAuDhB,eAAeA,aAAf","sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport {useHistory, NavLink} from 'react-router-dom';\nimport axios from \"axios\"\nimport { API } from '../api'\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { useParams } from 'react-router';\n\nexport function CountryDelete() {\n    const history = useHistory();\n    const [loading, setLoading] = useState(false)\n    const [loadingCountry, setLoadingCountry] = useState(false)\n\n    const [country, setCountry] = useState(null)\n    const { id } = useParams()\n\n    const { user: { token } } = useContext(AuthContext)\n    \n    useEffect(() => {\n        setLoadingCountry(true)\n        function fetchCountry() {\n            axios.get(API.countries.retrieve(id))\n                .then(res => {\n                    setCountry(res.data)\n                })\n                .finally(() => {\n                    setLoadingCountry(false)\n                })\n        }\n        fetchCountry()\n        return () => null\n    }, [id])\n\n    function handleSubmit(e) {\n        e.preventDefault()\n        setLoading(true)\n        axios.delete(API.countries.delete(id), {\n            headers: {\n                \"Authorization\": `Token ${token}`\n            }\n        })\n            .then(res => {\n                history.push(`/`)\n            })\n            .finally(() => {\n                setLoading(false)\n            })\n    }\n\n    return (\n        <div>\n            {loading && \"Submitting...\"}\n            {loadingJob && \"Fetching Country Details...\"}\n            {country && (\n                <form onSubmit={handleSubmit}>\n                    <button type=\"submit\">Submit</button>\n                </form>\n            )}\n        </div>\n    )\n\n}\n\nexport default CountryDelete"]},"metadata":{},"sourceType":"module"}