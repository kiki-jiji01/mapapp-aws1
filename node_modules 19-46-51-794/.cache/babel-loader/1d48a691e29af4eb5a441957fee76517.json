{"ast":null,"code":"var _jsxFileName = \"/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryCreate.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { Formik, Field, Form } from 'formik';\nimport { useFormik } from 'formik';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport axios from \"axios\";\nimport { API } from '../api';\nimport { useContext, useState, useEffect } from 'react';\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport { useHistory } from 'react-router-dom';\nimport * as yup from 'yup';\nimport Container from '@mui/material/Container';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ImagePreview({\n  file\n}) {\n  _s();\n\n  const [imageSrc, setImageSrc] = useState(null);\n  useEffect(() => {\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      setImageSrc(reader.result);\n    };\n\n    reader.readAsDataURL(file);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [!imageSrc && \"Loading...\", imageSrc && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: imageSrc,\n      className: \"h-20 w-20 px-3 py-3\",\n      alt: file.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ImagePreview, \"OOxWgbNG5e3A0ykrVn+RiF3dlH4=\");\n\n_c = ImagePreview;\nconst validationSchema = yup.object({\n  country_name: yup.string('Enter your country_name'),\n  //   .email('Enter a valid country_name')\n  //   .required('country_name is required'),\n  content: yup.string('Enter your content') //   .min(8, 'content should be of minimum 8 characters length')\n  //   .required('content is required'),\n\n});\nexport function CountryCreate() {\n  _s2();\n\n  const [loading, setLoading] = useState(false);\n  const {\n    user: {\n      token\n    }\n  } = useContext(AuthContext);\n  const [file, setFile] = useState(null);\n  const history = useHistory();\n\n  const handleSubmit = function handleSubmit(values) {\n    console.log(values);\n    setLoading(true);\n    const data = new FormData();\n    data.append('country_image', file);\n    data.append('content', values.content);\n    data.append('country_name', values.country_name);\n    {\n      file ? axios.post(API.countries.create, data, {\n        headers: {\n          \"Authorization\": `Token ${token}`\n        }\n      }).then(res => {\n        history.push(`/countries`);\n        console.log(res.data);\n      }).finally(() => {\n        setLoading(false);\n      }) : setLoading(false).then(history.push(`/create-countries`));\n    }\n    return () => null;\n  };\n\n  const formik = useFormik({\n    initialValues: {\n      country_image: '',\n      country_name: '',\n      content: ''\n    },\n    validationSchema: validationSchema,\n    onSubmit: handleSubmit\n  });\n  return /*#__PURE__*/_jsxDEV(Container, {\n    component: \"main\",\n    maxWidth: \"xs\",\n    sx: {\n      marginTop: \"20vh\"\n    },\n    children: [loading && \"Loading...\", /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: formik.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        id: \"country_name\",\n        name: \"country_name\",\n        label: \"country_name\",\n        value: formik.values.country_name,\n        onChange: formik.handleChange,\n        error: formik.touched.country_name && Boolean(formik.errors.country_name),\n        helperText: formik.touched.country_name && formik.errors.country_name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(TextField, {\n        fullWidth: true,\n        id: \"content\",\n        name: \"content\",\n        label: \"content\" // type=\"password\"\n        ,\n        value: formik.values.content,\n        onChange: formik.handleChange,\n        error: formik.touched.content && Boolean(formik.errors.content),\n        helperText: formik.touched.content && formik.errors.content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        component: \"label\",\n        children: [\"Image Upload\", /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => setFile(e.target.files[0]),\n          type: \"file\",\n          style: {\n            display: 'none'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), file && /*#__PURE__*/_jsxDEV(ImagePreview, {\n        file: file\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"contained\",\n        fullWidth: true,\n        type: \"submit\",\n        children: \"Submit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 9\n  }, this);\n}\n\n_s2(CountryCreate, \"4EAebJCfCJwMdBV2ags4o4MJ3pU=\", false, function () {\n  return [useHistory, useFormik];\n});\n\n_c2 = CountryCreate;\nexport default CountryCreate;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"ImagePreview\");\n$RefreshReg$(_c2, \"CountryCreate\");","map":{"version":3,"sources":["/Users/genta/mapapp-aws1/mapapp-aws1/src/countries/components/CountryCreate.js"],"names":["Formik","Field","Form","useFormik","Button","TextField","axios","API","useContext","useState","useEffect","AuthContext","useHistory","yup","Container","ImagePreview","file","imageSrc","setImageSrc","reader","FileReader","onloadend","result","readAsDataURL","name","validationSchema","object","country_name","string","content","CountryCreate","loading","setLoading","user","token","setFile","history","handleSubmit","values","console","log","data","FormData","append","post","countries","create","headers","then","res","push","finally","formik","initialValues","country_image","onSubmit","marginTop","handleChange","touched","Boolean","errors","e","target","files","display"],"mappings":"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","sourcesContent":["import { Formik, Field, Form } from 'formik';\nimport { useFormik } from 'formik';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\nimport axios from \"axios\"\nimport { API } from '../api'\nimport {  useContext,useState , useEffect} from 'react';\nimport { AuthContext } from \"../contexts/AuthContext\";\nimport {useHistory} from 'react-router-dom';\nimport * as yup from 'yup';\nimport Container from '@mui/material/Container';\n\nfunction ImagePreview({ file }) {\n    const [imageSrc, setImageSrc] = useState(null)\n\n    useEffect(() => {\n        const reader = new FileReader()\n        reader.onloadend = () => {\n            setImageSrc(reader.result)\n        }\n        reader.readAsDataURL(file)\n    })\n\n    return (\n        <div>\n            {!imageSrc && \"Loading...\"}\n            {imageSrc && (\n                <img src={imageSrc} className=\"h-20 w-20 px-3 py-3\" alt={file.name} />\n            )}\n        </div>\n    )\n}\n\nconst validationSchema = yup.object({\n    country_name: yup\n      .string('Enter your country_name'),\n    //   .email('Enter a valid country_name')\n    //   .required('country_name is required'),\n    content: yup\n      .string('Enter your content')\n    //   .min(8, 'content should be of minimum 8 characters length')\n    //   .required('content is required'),\n  });\n\n\n\nexport function CountryCreate() {\n    const [loading, setLoading] = useState(false)\n    const { user: { token } } = useContext(AuthContext)\n    const [file, setFile] = useState(null)\n    const history = useHistory();\n\n\n    const handleSubmit = function handleSubmit(values) {\n        console.log(values)\n        setLoading(true)\n        const data = new FormData()\n        data.append('country_image', file)\n        data.append('content', values.content)\n        data.append('country_name', values.country_name)\n\n        {file ? (\n\n        axios.post(API.countries.create, data,{\n            headers: {\n                \"Authorization\": `Token ${token}`\n            }\n        })\n            .then(res => {\n                history.push(`/countries`)\n                console.log(res.data)\n            })\n            .finally(() => {\n                setLoading(false)\n            })\n        ):(\n            setLoading(false)\n            .then( history.push(`/create-countries`))\n           \n            \n        )}\n            return () => null\n    }\n\n\n    const formik = useFormik({\n        initialValues: {\n          country_image: '',\n          country_name: '',\n          content: '',\n        },\n        validationSchema: validationSchema,\n        onSubmit: handleSubmit\n      });\n    \n\n\n    \n\n    return (\n        <Container component=\"main\" maxWidth=\"xs\" sx={{ marginTop: \"20vh\"}}>\n            {loading && \"Loading...\"}\n            <form onSubmit={formik.handleSubmit}>\n                <TextField\n                fullWidth\n                id=\"country_name\"\n                name=\"country_name\"\n                label=\"country_name\"\n                value={formik.values.country_name}\n                onChange={formik.handleChange}\n                error={formik.touched.country_name && Boolean(formik.errors.country_name)}\n                helperText={formik.touched.country_name && formik.errors.country_name}\n                />\n                <TextField\n                fullWidth\n                id=\"content\"\n                name=\"content\"\n                label=\"content\"\n                // type=\"password\"\n                value={formik.values.content}\n                onChange={formik.handleChange}\n                error={formik.touched.content && Boolean(formik.errors.content)}\n                helperText={formik.touched.content && formik.errors.content}\n                />\n                <Button  variant=\"contained\" component=\"label\">\n                    Image Upload\n                    <input\n                    onChange={e => setFile(e.target.files[0])}\n                    type=\"file\"\n                    style={{display:'none'}}   \n                    />\n                </Button>\n                {file && (\n                    <ImagePreview file={file} />\n                )}\n                <Button  variant=\"contained\" fullWidth type=\"submit\">\n                Submit\n                </Button>\n            </form>\n           \n        </Container>\n    )\n\n}\n\nexport default CountryCreate"]},"metadata":{},"sourceType":"module"}